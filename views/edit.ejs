<% layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/CSS/edit.css" />
<form class="add-form" action="/posts/<%=data.rows[0].id%>?_method=PATCH" method="POST">
    <label>Edit Text</label>
    <p></p>
    <textarea id="edit_content" name="edit_content"  rows="4" cols="50">
        <%-data.rows[0].post%>
    </textarea>
    <button id="editSubmitBtn">Submit</button>
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    

    $('#edit_content').on('input', function(){
        var editedText = $('#edit_content').val();
        console.log(editedText)
        if(editedText.includes("<script>")){
            alert("Can not use the script tag. Thank you.")
            $("#editSubmitBtn").attr('disabled',true);
        }else{
            console.log("it is fine.")
            $("#editSubmitBtn").attr('disabled',false);
        }
    })
    

</script>